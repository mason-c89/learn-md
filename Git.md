# Git 子模块（submodule）

Git 子模块是一种管理嵌套仓库的功能，常用于在一个 Git 仓库中引用其他独立的 Git 仓库。这种机制适合用于项目之间的依赖管理。

### 子模块的典型使用场景

当你的主项目依赖其他独立开发的库时，子模块能够简化同步工作。假设你有一个项目 A 依赖库 B，且 B 是一个独立的 Git 仓库。如果直接将 B 的代码复制到 A 中，每次 B 更新时都需要手动同步。而子模块使你可以将 B 嵌入 A 中，保持与 B 的同步，类似一个嵌套仓库的结构。

### 常见操作

1. **添加子模块：**

   使用以下命令将指定的 Git 仓库作为子模块添加到当前仓库的指定路径：

   ```bash
   git submodule add <子模块仓库URL> <子模块存放路径>
   ```

2. **初始化子模块：**
   克隆包含子模块的仓库后，首次使用子模块时，需要先初始化：

   ```bash
   git submodule init
   ```

3. **更新子模块：**
   初始化后，还需要同步子模块的代码：

   ```bash
   git submodule update
   ```

4. **克隆包含子模块的仓库：**
   为了在克隆时自动初始化并更新子模块，使用 `--recurse-submodules` 参数：

   ```bash
   git clone --recurse-submodules <仓库URL>
   ```

5. **同步子模块到最新版本：**
   子模块不会自动跟随其远程仓库的更新，需要手动同步：

   ```bash
   cd <子模块路径>
   git fetch
   git checkout <目标分支或提交>
   ```

6. **移除子模块：**
   删除子模块需要以下步骤：

   - 在 `.gitmodules` 文件中删除对应的子模块条目。
   - 从 `.git/config` 文件中移除该子模块的配置。
   - 删除子模块的文件夹。
   - 执行以下命令将子模块从缓存中移除：

     ```bash
     git rm --cached <子模块路径>
     ```

### 注意事项

- 子模块并不会自动跟随其远程仓库的更新。主项目中的子模块指向的是某个特定的提交，如果远程库有更新，主项目需要手动更新子模块的引用。